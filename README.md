
# 🏮 MTU-JSON-GUI

### 专业的日漫汉化可视化排版与嵌字协作工具

**MTU-JSON-GUI** 是一款高度集成的 Web 端排版编辑器，专为解决日漫汉化流程中“翻译与嵌字脱节”的痛点而设计。它能够无缝对接主流 OCR 引擎生成的 JSON 数据，通过 Canvas 实时渲染技术，让译者在翻译的同时就能完成接近出版级的专业嵌字排版。

---

## 🛠️ 核心功能技术解析

### 1. 深度优化的日式排版引擎

* **智能竖排布局**：自动处理日文垂直排版中的标点压缩、旋转以及避让逻辑。
* **自动 TCY (纵中横)**：针对 2-4 位数字自动执行纵中横旋转，无需手动干预。
* **Ruby 注音系统**：支持高度自定义的注音（Furigana）渲染，自动计算注音与正文的间距及对齐。
* **字符级压缩控制**：针对标点符号提供特殊的视觉权重计算，确保排版紧凑美观。

### 2. 独创的文字视觉特效

* **强力填孔描边 (Fill-Holes)**：针对大字号粗描边导致的文字内部“空心”问题，开发了多层叠加补偿算法。
* **多维文字效果**：支持发光（Glow）、多重描边（Stroke）和投影（Shadow）的实时预览与调节。
* **切变与镜像**：支持 `[v]` 垂直切变（模拟透视）以及水平/垂直镜像翻转，适配各种异形对话框。

### 3. 自动化排版助理

* **物理中轴线对齐**：基于 OCR 原始框体坐标，自动计算最优行间距（Line Spacing）。
* **感知式字号计算**：一键根据对话框空间自动推算最契合的字号，告别手动尝试。
* **角度归位系统**：提供“斜”（智能探测倾斜角）与“直”（强制角度归零）两种模式，快速修正非水平对话框。

---

## 📖 极简保姆级使用指南

### 第一步：文件命名与准备

为了实现“秒速匹配”，请确保文件命名统一：

* **图片**：`p01.jpg`
* **数据**：`p01_translations.json`

> 工具会自动通过 `_translations` 后缀进行图片与 JSON 的逻辑绑定。

### 第二步：数据导入

1. **批量模式**（推荐）：直接点击“批量图片”和“批量 JSON”，选择对应的文件夹即可。
2. **文件导航**：使用右侧导航栏或快捷键 `ArrowLeft/Right` 在页码间切换，系统会自动保存上一页的修改。

### 第三步：可视化编辑

1. **选中与调整**：点击画布上的框体，通过**紫色手柄旋转**，**橙/蓝色手柄缩放**。
2. **富文本应用**：在左侧编辑器中选中文本，点击工具栏按钮（如 `[B]` 加粗、`[Ru]` 注音）即可快速插入排版指令。
3. **实时预览**：所有修改（包括颜色、字号、间距）都会在 Canvas 上即时反馈。

### 第四步：保存与导出

* 修改完成后，点击“💾 导出”。
* **单页模式**下将导出渲染后的 PNG 图片。
* **批量模式**下将打包所有修改后的 JSON 数据，方便后续集成。

---

## ⌨️ 效率专家快捷键

| 按键 | 动作 |
| --- | --- |
| **A / D** | 选中画布中的 上一个 / 下一个 文本框 |
| **← / →** | 批量模式下的 页面切换（上一张 / 下一张） |
| **[ / ]** | 快速 减小 / 增大 选中框的字号 |
| **Space (长按)** | 进入抓手模式，自由平移画布视图 |
| **Delete** | 删除当前选中的行框或整个区域 |

---

## 🏷️ 富文本标签速查表

| 标签 | 效果 | 示例 |
| --- | --- | --- |
| `[r=xxx]` | 添加注音 | `[r=せんせい]先生[/r]` |
| `[v=15]` | 垂直切变 | `[v=15]倾斜文字[/v]` |
| `[rot=45]` | 局部旋转 | `[rot=45]旋转[/rot]` |
| `[d]` | 着重号 | `[d]关键词[/d]` |
| `[t]` | 强制纵中横 | `[t]99[/t]` |
| `[m] / [mv]` | 水平/垂直镜像 | `[m]镜像文字[/m]` |

---

